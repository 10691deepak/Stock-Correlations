cor_master <- function(min_periods =3000, lag_periods = 1){
  
  #necessary packages
    #quantmod 
    #zoo
    #PerformanceAnalytics
  load(quantmod)
  load(zoo)
  load(PerformanceAnalytics)
  
  #timing the code
  g <- rnorm(100000)
  h <- rep(NA, 100000)
  #start the clock
  ptm <- proc.time()
  h <- g + 1
  proc.time() - ptm

  #calls function to generate the matrix of stock prices
  stock_matrix <- stock_matrix_generator(min_periods)
  
  #calls function to generate lagged correlation matrix
  lagged_correlation_matrix <- lag_cor_matrix_generator(stock_matrix, lag_periods)
  
  #calls function to generate p-values of lagged correlation matrix
  #number of elements is assumed to equal min_periods
  lagged_p_value_matrix <- p_value_matrix(lagged_correlation_matrix, min_periods)
  
  return(lagged_p_value_matrix)
  
  
  # Stop the clock
  proc.time() - ptm
  
}
